# ν”„λ΅μ νΈ μ”μ•½: Java Community μ• ν”λ¦¬μΌ€μ΄μ…

μ΄ λ¬Έμ„λ” Gemini CLI μ—μ΄μ „νΈκ°€ `java-community` Spring Boot μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μν–‰ν• μ‘μ—…μ„ μ”μ•½ν•©λ‹λ‹¤.

## ν”„λ΅μ νΈ κµ¬μ΅° κ°μ”

μ΄ ν”„λ΅μ νΈλ” Gradle κΈ°λ°μ Spring Boot μ• ν”λ¦¬μΌ€μ΄μ…μ…λ‹λ‹¤. μ£Όμ” κµ¬μ„± μ”μ†λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:
- **`src/main/java/dev/flynnpark/community/`**: μ£Όμ” Java μ†μ¤ λ””λ ‰ν† λ¦¬.
    - `JavaCommunityApplication.java`: Spring Boot μ• ν”λ¦¬μΌ€μ΄μ… μ§„μ…μ .
    - `controller/HealthCheckController.java`: ν—¬μ¤ μ²΄ν¬λ¥Ό μ„ν• REST μ»¨νΈλ΅¤λ¬.
    - `exception/GlobalExceptionHandler.java`: μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ—­ μμ™Έ μ²λ¦¬κΈ°.
    - `response/CommonResponse.java`: ν‘μ¤€ν™”λ API μ‘λ‹µμ„ μ„ν• μ λ„¤λ¦­ ν΄λμ¤.
- **`src/main/resources/application.properties`**: Spring Boot μ„¤μ • νμΌ.
- **`src/test/java/dev/flynnpark/community/`**: ν…μ¤νΈ μ†μ¤ λ””λ ‰ν† λ¦¬.

## μν–‰ μ‘μ—…

μ£Όμ” μ‘μ—…μ€ ν”„λ΅μ νΈ κµ¬μ΅°λ¥Ό μ΄ν•΄ν•κ³  ν•µμ‹¬ λ¨λ“μ— λ€ν• μ μ ν• λ‹¨μ„ ν…μ¤νΈλ¥Ό κµ¬ν„ν•λ” κ²ƒμ΄μ—μµλ‹λ‹¤.

### 1. λ‹¨μ„ ν…μ¤νΈ κµ¬ν„

λ‹¤μ λ¨λ“μ— λ€ν• λ‹¨μ„ ν…μ¤νΈκ°€ μƒμ„±λμ—μµλ‹λ‹¤:

-   **`CommonResponseTest.java`**:
    -   `success()`, `success(T data)`, `error(int code, String message)` μ •μ  ν©ν† λ¦¬ λ©”μ„λ“μ κΈ°λ¥μ„ κ²€μ¦ν–μµλ‹λ‹¤.
    -   `code`, `message`, `result` ν•„λ“ ν• λ‹Ήμ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈν–μµλ‹λ‹¤.

-   **`HealthCheckControllerTest.java`**:
    -   `@WebMvcTest`λ¥Ό μ‚¬μ©ν•μ—¬ `/healthcheck` μ—”λ“ν¬μΈνΈλ¥Ό ν…μ¤νΈν–μµλ‹λ‹¤.
    -   `@MockitoBean`μ„ μ‚¬μ©ν•μ—¬ `DataSource` μΆ…μ†μ„±μ„ λ¨μν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ‹λ‚λ¦¬μ¤(μ„±κ³µ λ° μ‹¤ν¨)λ¥Ό μ‹λ®¬λ μ΄μ…ν–μµλ‹λ‹¤.
    -   μ¬λ°”λ¥Έ HTTP μƒνƒ, μ½ν…μΈ  μ ν• λ° JSON μ‘λ‹µ κµ¬μ΅°(`code`, `message`, `result`)λ¥Ό μ–΄μ„¤μ…ν–μµλ‹λ‹¤.

-   **`GlobalExceptionHandlerTest.java`**:
    -   `GlobalExceptionHandler` ν΄λμ¤λ¥Ό μΈμ¤ν„΄μ¤ν™”ν•κ³  `handleAllExceptions` λ©”μ„λ“λ¥Ό νΈμ¶ν•μ—¬ μ§μ ‘ λ‹¨μ„ ν…μ¤νΈν•λ„λ΅ λ¦¬ν©ν† λ§ν–μµλ‹λ‹¤. μ΄ μ ‘κ·Ό λ°©μ‹μ€ μμ™Έ μ²λ¦¬ λ΅μ§μ— λ€ν• λ³΄λ‹¤ μ§‘μ¤‘μ μΈ λ‹¨μ„ ν…μ¤νΈλ¥Ό μ„ν•΄ Spring MVC λ³µμ΅μ„±μ„ μ°νν•©λ‹λ‹¤.
    -   μΌλ° `RuntimeException`μ΄ μ¬λ°”λ¥΄κ² μ΅νκ³  `HttpStatus.INTERNAL_SERVER_ERROR` λ° μ μ ν• μ¤λ¥ λ©”μ‹μ§€μ™€ ν•¨κ» `CommonResponse`λ΅ λ³€ν™λλ”μ§€ μ–΄μ„¤μ…ν–μµλ‹λ‹¤.

### 2. λ””λ²„κΉ… λ° κ°μ„ 

ν…μ¤νΈ λ‹¨κ³„μ—μ„ μ—¬λ¬ λ¬Έμ κ°€ λ°μƒν–μΌλ©° ν•΄κ²°λμ—μµλ‹λ‹¤:

-   **`CommonResponse` κµ¬μ΅° λ¶μΌμΉ**: `CommonResponse`μ `success` μ •μ  ν©ν† λ¦¬ λ©”μ„λ“μ™€ `code`, `message`, `result` ν•„λ“ κ°„μ λ§¤ν•‘μ— λ€ν• μ΄κΈ° μ΄ν•΄ λ¶€μ΅±μΌλ΅ μΈν•΄ μ΄κΈ° ν…μ¤νΈκ°€ μ‹¤ν¨ν–μµλ‹λ‹¤. `CommonResponse.java` νμΌμ„ λ‹¤μ‹ μ½κ³  κ·Έμ— λ”°λΌ ν…μ¤νΈ μ–΄μ„¤μ…μ„ μ—…λ°μ΄νΈν•μ—¬ μμ •ν–μµλ‹λ‹¤.
-   **`HealthCheckController` μΆ…μ†μ„±**: `HealthCheckController`μ `DataSource` μΆ…μ†μ„±μΌλ΅ μΈν•΄ `@WebMvcTest`μ—μ„ `NoSuchBeanDefinitionException`μ΄ λ°μƒν–μµλ‹λ‹¤. `@MockitoBean`μ„ λ„μ…ν•μ—¬ `DataSource`λ¥Ό λ¨μν•μ—¬ ν•΄κ²°ν–μµλ‹λ‹¤.
-   **`GlobalExceptionHandlerTest` λ΅μ§**: `GlobalExceptionHandler`μ— λ€ν• μ΄κΈ° `@WebMvcTest` μ„¤μ •μ€ μμƒλ `RuntimeException` λ€μ‹  `NoResourceFoundException`μ„ λ°μƒμ‹μΌ°μµλ‹λ‹¤. μ΄λ” μ»¨νΈλ΅¤λ¬ λ©”μ„λ“ νΈμ¶ μ „μ— Springμ `DispatcherServlet`μ΄ μ •μ  λ¦¬μ†μ¤ ν•΄κ²°μ„ μ²λ¦¬ν•κΈ° λ•λ¬Έμ΄μ—μµλ‹λ‹¤. ν…μ¤νΈλ” `GlobalExceptionHandler`μ λ©”μ„λ“λ¥Ό μ§μ ‘ λ‹¨μ„ ν…μ¤νΈν•λ„λ΅ λ¦¬ν©ν† λ§λμ–΄ μ¬λ°”λ¥Έ μμ™Έ μ²λ¦¬ λ΅μ§μ΄ κ²€μ¦λλ„λ΅ ν–μµλ‹λ‹¤.
-   **`getBody() may return null` κ²½κ³ **: `GlobalExceptionHandlerTest.java`μ—μ„ `responseEntity.getBody()`κ°€ `null`μ„ λ°ν™ν•  μ μλ‹¤λ” μ •μ  λ¶„μ„ κ²½κ³ λ” `Objects.requireNonNull()`μ„ μ‚¬μ©ν•μ—¬ ν•΄λ‹Ή μ§€μ μ—μ„ `null`μ΄ μ•„λ‹μ„ λ…μ‹μ μΌλ΅ μ–΄μ„¤μ…ν•μ—¬ ν•΄κ²°ν–μµλ‹λ‹¤.

### 3. ν…μ¤νΈ ν™κ²½ μ„¤μ •

ν…μ¤νΈ ν™κ²½ μ„¤μ • λ° λ””λ²„κΉ… κ³Όμ •μ—μ„ λ‹¤μκ³Ό κ°™μ€ μ¤‘μ”ν• μ‚¬ν•­λ“¤μ„ μ•κ² λμ—μµλ‹λ‹¤:

-   **Spring Securityμ™€ `@WebMvcTest`**: `@WebMvcTest`λ” μ›Ή κ³„μΈµλ§ λ΅λ“ν•λ―€λ΅, Spring Securityκ°€ ν™μ„±ν™”λ κ²½μ° ν…μ¤νΈκ°€ `403 Forbidden` μ¤λ¥λ΅ μ‹¤ν¨ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ `@WebMvcTest`μ `excludeAutoConfiguration` μ†μ„±μ„ μ‚¬μ©ν•μ—¬ `SecurityAutoConfiguration` λ° `UserDetailsServiceAutoConfiguration`μ„ μ μ™Έν•κ±°λ‚, ν…μ¤νΈ ν™κ²½μ— λ§κ² λ³΄μ• μ„¤μ •μ„ λ…μ‹μ μΌλ΅ κµ¬μ„±ν•΄μ•Ό ν•©λ‹λ‹¤.
-   **`MockBean`κ³Ό `MockitoBean`**: `@MockBean` μ–΄λ…Έν…μ΄μ…μ€ λ” μ΄μƒ μ‚¬μ©λμ§€ μ•μΌλ©°, `MockitoBean`μ΄ κ¶μ¥λλ” λ€μ²΄μ¬μ…λ‹λ‹¤. νΉν μµμ‹  Spring λ²„μ „μ—μ„λ” `org.springframework.test.context.bean.override.mockito.MockitoBean` ν¨ν‚¤μ§€μ— μ„μΉν•  μ μμµλ‹λ‹¤.
-   **`MockMvc` ν…μ¤νΈ λ””λ²„κΉ…**: `MockMvc` ν…μ¤νΈμ—μ„ `andDo(print())`λ¥Ό μ‚¬μ©ν•λ©΄ μ”μ²­ λ° μ‘λ‹µμ— λ€ν• μμ„Έν• μ •λ³΄λ¥Ό μ¶λ ¥ν•μ—¬ λ””λ²„κΉ…μ— λ§¤μ° μ μ©ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄ μ¶λ ¥μ€ λΉλ“ λ„κµ¬(μ: Gradle)μ— μν•΄ μΊ΅μ²λ  μ μμΌλ―€λ΅, μ½μ†”μ—μ„ μ§μ ‘ ν™•μΈν•λ ¤λ©΄ ν…μ¤νΈ λ³΄κ³ μ„λ¥Ό ν™•μΈν•κ±°λ‚ `--info` μµμ…κ³Ό κ°™μ€ μ¶”κ°€ λΉλ“ λ…λ Ήμ„ μ‚¬μ©ν•΄μ•Ό ν•  μ μμµλ‹λ‹¤.

### 4. λΉλ“ λ° ν…μ¤νΈ μƒνƒ

-   λ¨λ“  κ²½κ³ λ¥Ό μμ •ν• ν›„ ν”„λ΅μ νΈκ°€ μ„±κ³µμ μΌλ΅ λΉλ“λμ—μΌλ©°, λ¨λ“  ν…μ¤νΈκ°€ ν†µκ³Όν–μµλ‹λ‹¤.
-   λΉλ“ κ³Όμ •μ—μ„ `OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended` κ²½κ³ κ°€ λ°μƒν–μ§€λ§, μ΄λ” JVM μμ¤€μ κ²½κ³ λ΅ ν”„λ΅μ νΈ μ½”λ“μ™€ μ§μ ‘μ μΈ κ΄€λ ¨μ€ μ—†μµλ‹λ‹¤.

### 5. Import μ •λ¦¬ λ° μ •λ ¬

-   ν„μ¬ ν”„λ΅μ νΈμ—λ” importλ¥Ό μλ™μΌλ΅ μ •λ¦¬ν•κ±°λ‚ μ •λ ¬ν•λ” Gradle ν”λ¬κ·ΈμΈμ΄ κµ¬μ„±λμ–΄ μμ§€ μ•μµλ‹λ‹¤.
-   μ‚¬μ©μμ μ”μ²­μ— λ”°λΌ IDE κΈ°λ¥μ„ μ‚¬μ©ν•μ—¬ importλ¥Ό μ •λ¦¬ν•λ” κ²ƒμΌλ΅ κ²°μ •ν–μµλ‹λ‹¤.

## Git μ»¤λ°‹ μ»¨λ²¤μ…

μ΄ ν”„λ΅μ νΈμ Git μ»¤λ°‹ λ©”μ‹μ§€λ” λ‹¤μ μ»¨λ²¤μ…μ„ λ”°λ¦…λ‹λ‹¤:

-   **ν•μ‹**: `<μ΄λ¨μ§€> <μ λ©>`
    -   μ λ©μ€ 50μ μ΄λ‚΄μ κ°„κ²°ν• μ”μ•½μ΄μ–΄μ•Ό ν•©λ‹λ‹¤.
-   **λ³Έλ¬Έ**: μ λ© λ‹¤μμ—λ” λΉ μ¤„μ„ λ‘κ³ , λ³€κ²½ μ‚¬ν•­μ— λ€ν• μμ„Έν• μ„¤λ…μ„ κΈ€λ¨Έλ¦¬ κΈ°νΈ λ©λ΅μΌλ΅ μ‘μ„±ν•©λ‹λ‹¤.
    -   κ° ν•­λ©μ€ `-`λ΅ μ‹μ‘ν•©λ‹λ‹¤.
    -   λ³€κ²½ μ‚¬ν•­μ *λ‚΄μ©*λ³΄λ‹¤λ” *μ΄μ *μ— μ΄μ μ„ λ§μ¶¥λ‹λ‹¤.
-   **μ–Έμ–΄**: ν•κµ­μ–΄ μ‚¬μ©μ„ κ¶μ¥ν•©λ‹λ‹¤.
-   **μ΄λ¨μ§€ μ»¨λ²¤μ…**:

    -   `β¨`: μƒλ΅μ΄ κΈ°λ¥ μ¶”κ°€
    -   `π›`: λ²„κ·Έ μμ •
    -   `β™»οΈ`: μ½”λ“ λ¦¬ν©ν† λ§ (κΈ°λ¥ λ³€κ²½ μ—†μ)
    -   `π“`: λ¬Έμ„ λ³€κ²½
    -   `π€`: μ„±λ¥ κ°μ„ 
    -   `β…`: ν…μ¤νΈ μ½”λ“ μ¶”κ°€ λλ” μμ •
    -   `π“¦`: λΉλ“ μ‹μ¤ν… λλ” μ™Έλ¶€ μΆ…μ†μ„± λ³€κ²½
    -   `π‘·`: CI μ„¤μ • λ³€κ²½
    -   `β`: μ΄μ „ μ»¤λ°‹ λλλ¦¬κΈ°
    -   `π—‘οΈ`: κΈ°νƒ€ μμν• λ³€κ²½ (λΉλ“ ν”„λ΅μ„Έμ¤, λ³΄μ΅° λ„κµ¬ λ“±)

## κ²°λ΅ 

μ΄ ν”„λ΅μ νΈλ” μ΄μ  ν•µμ‹¬ λ¨λ“μ— λ€ν• ν¬κ΄„μ μΈ λ‹¨μ„ ν…μ¤νΈ μ„ΈνΈλ¥Ό κ°–μ¶”κ³  μμΌλ©°, `CommonResponse`, `HealthCheckController`, `GlobalExceptionHandler` κµ¬μ„± μ”μ†μ μ •ν™•μ„±κ³Ό μ•μ •μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤. λ¨λ“  ν…μ¤νΈλ” ν„μ¬ ν†µκ³Όν•©λ‹λ‹¤.

---

**μ°Έκ³ :** μ΄ λ¬Έμ„λ” μ‚¬μ©μ μ”μ²­μ— λ”°λΌ ν•κµ­μ–΄λ΅ μ‘μ„±λμ—μµλ‹λ‹¤. ν–¥ν›„ λ¨λ“  μ‘λ‹µμ€ ν•κµ­μ–΄λ΅ μ κ³µλ©λ‹λ‹¤.